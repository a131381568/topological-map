# Topological Map

## 一、簡述（Description）

**網路拓撲 ( Topological Map )**，又稱為網路布局，或網路結構。此為電腦網路中，端點間連接的方式。網路上各端點藉由鏈 ( Link )、節點 ( Node ) 或交換中心 ( Switch )互相連接。這種連接的通路分布即為**網路拓樸**。

> 繪製**網路拓樸圖**能夠釐清——系統內部，每台電腦之間的關係，對於維運、監控系統、管理主機設備，有很大的功用。

曾經有使用過 jQuery 製作**繪製拓樸圖**的功能，因為不斷的定位 DOM 當下的狀態，並使其更改、刷新......等，使得專案結構上不是這麼好維護。

此專案目的為使用 Vue3 的資料驅動畫面、雙向綁定和資料流的思考方式，搭配 D3.js 來重構**繪製拓樸圖**的功能。

- 線上 DEMO 站 - [https://www.puraliena.com/](https://www.puraliena.com/)
![home](https://i.imgur.com/k3DyDmR.png)
- 編輯拓樸圖
![edit](https://i.imgur.com/nZweJbk.png)


## 二、操作流程（Flow）

### 案例 A. 新增群組
從零開始繪製一張：一階層、一節點的拓樸圖。
![add-group](https://i.imgur.com/IgBZXQJ.jpg)
<!--
1. 進入首頁。
2. 點選下方的左邊的**新增群組**，或點選上方選單的**GROUP**，都能到達路由`/group`。
3. 點選**新增群組**。
4. 輸入**群組名稱**和**群組代號**，點選**確定**，能夠看到列表已新增一個群組。
5. 點選剛新增的項目**編輯**的鉛筆 Icon。
6. 路由已跳到此群組的編輯模式頁面`/topo-edit/{tid}`，因為尚無資料，會跳出強制新增階層的燈箱，輸入**階層名稱**和**節點名稱**後，點選確定。
7. 最後按右上角的**儲存修改**，就能夠儲存此拓樸圖了。
-->

### 案例 B. 新增階層
![add-floor](https://i.imgur.com/l2xNR2G.jpg)
匯入範例檔案，新增一個階層和一個節點並連線。
<!-- 1. 進入首頁。
2. 點選右邊的**下載**，下載完後，右邊的查看按鈕會從灰色變成綠色。
3. 點選綠色按鈕的**查看**。
4. 路由會跳到`/group`，點選項目為城市大學的**鉛筆按鈕** ( 編輯 )。
5. 會看到一個畫好的四階層連線拓樸圖，在右下角點選**新增階層**。
6. 輸入**階層名稱**和**節點名稱**後按確定，右邊控制台最下面會出現已新增的階層和節點，點選已新增的節點後會展開連線設定，點選**新增連線**。
7. 跳出選擇連線的燈箱， 展開清單後，選擇**總服務器**後，按確定，拓樸圖就會刷新。
8. 最後按右上角的**儲存修改**，就能夠儲存此拓樸圖了。 -->

### 案例 C. 新增節點
匯入範例檔案，新增一個節點並連線。
1. 進入首頁。
2. 點選右邊的**下載**，下載完後，右邊的查看按鈕會從灰色變成綠色。
3. 點選綠色按鈕的**查看**。
4. 路由會跳到`/group`，點選項目為城市大學的**鉛筆按鈕** ( 編輯 )。
5. 會看到一個畫好的四階層連線拓樸圖，在右邊**管理員**的區塊，點選**新增節點**。
6. 輸入**節點名稱**後按確定，**管理員**區塊下方會出現已新增的節點，點選後會展開連線設定，點選**新增連線**。
7. 跳出選擇連線的燈箱， 展開清單後，選擇**教學樓**後，按確定，拓樸圖就會刷新。
8. 最後按右上角的**儲存修改**，就能夠儲存此拓樸圖了。

### 案例 D. 新增群組+新增階層+連線
從零開始繪製一張：兩階層、有連線的拓樸圖。
1. 進入首頁。
2. 點選下方的左邊的**新增群組**，或點選上方選單的**GROUP**，都能到達路由`/group`。
3. 點選**新增群組**。
4. 輸入**群組名稱**和**群組代號**，點選**確定**，能夠看到列表已新增一個群組。
5. 點選剛新增的項目**編輯**的鉛筆 Icon。
6. 路由已跳到此群組的編輯模式頁面`/topo-edit/{tid}`，因為尚無資料，會跳出強制新增階層的燈箱，輸入**階層名稱**和**節點名稱**後，點選確定。
7. 已繪製出拓樸圖，點選右下角的圓形的**新增階層**按鈕。
8. 輸入要新增的**階層名稱**、**節點名稱**後，點選確定。
9. 拓樸圖已刷新成兩個點，展開右邊 X 節點名稱 V 的手風琴選單，點選**新增連線**按鈕。
10. 跳出節點連線燈箱，選擇**可連線的節點**後按確定，拓樸圖內的節點即可產生連線。
11. 最後按右上角的**儲存修改**，就能夠儲存此拓樸圖了。

### 案例 E. 刪除群組
刪除匯入的群組——城市大學。
1. 進入首頁。
2. 點選右邊的**下載**，下載完後，右邊的查看按鈕會從灰色變成綠色。
3. 點選綠色按鈕的**查看**。
4. 路由會跳到`/group`，點選項目為城市大學的**垃圾桶按鈕** ( 刪除 )。
5. 跳出確定燈箱，點選確定，群組的**城市大學**就成功刪除了。
6. 點選上方選單的**LIST**，跳到路由`/list`，此節點列表內隸屬城市大學的都已經被刪除了。

### 案例 F. 刪除階層
...

### 案例 G. 刪除節點 ( 內部 + 外部 )
...

### 案例 H. 刪除連線
...

### 案例 I. 修改群組名稱
...

### 案例 J. 修改階層名稱
...

### 案例 K. 修改節點名稱
...


## 三、使用技術及套件（NPM）
- vue - SPA 應用框架，版本為 3.2。
- pinia - vuex 的簡化版，管理共用的資料。
- vue-router - vue 的路由系統。
- d3.js - 繪製 SVG 連線。
- vite - 本地開發比起 webpack 更有效率的 dev-server（不進行打包）。
- bootstrap - 版本為 5.1.3，無依賴 jQuery 的版本，作為開發 UI 操作介面的基底。
- sass - 配合 vite 的打包，進行 CSS 的模組化樣式管理。
- typescript - 管理 JS 的 Type。


## 四、前端路由與組件架構（Vue Router & Component）
待補...


## 五、資料結構相關（Data Sheet & Apiary）

### A. 資料表關係
僅僅為 DEMO 功能，並沒有要將資料存回後端，因為沒有後端，所以這邊就介紹資料結構。
此 Type 可在 `/src/type/type.d.ts` 找到對照。

![type](https://i.imgur.com/Glg8uDF.jpg)


### B. Apiary API

目前沒有開後端 Server 串資料庫，範例資料的三支 API 是串 [Apiary](https://toponet.docs.apiary.io/) 的 Mock Server。
- [groupConversion ( 群組對照 )](https://toponet.docs.apiary.io/#/reference/0/all-group/data-in-group-conversion/200?mc=reference%2F0%2Fall-group%2Fdata-in-group-conversion%2F200)
- [floorConversion ( 階層對照 )](https://toponet.docs.apiary.io/#/reference/0/all-floor/data-in-totalfloor-conversion/200?mc=reference%2F0%2Fall-floor%2Fdata-in-totalfloor-conversion%2F200)
- [nodeList ( 節點資料 )](https://toponet.docs.apiary.io/#/reference/0/all-node/data-in-total-topo-list-data/200?mc=reference%2F0%2Fall-node%2Fdata-in-total-topo-list-data%2F200)


## 六、本機開發（Local Development）
 安裝 NPM 依賴並運行。
```shell
npm install
npm run dev
# 顯示 > Local: http://localhost:3000/
```


## 七、聲明（Disclaimer）
- 網站內的內容，皆作為學術研究用途，無商業行為。
- 素材與資料來源：Reshot、Freepik、國家教育研究院、Wikipedia。